#!/usr/bin/env node
"use strict";var n=require("commander"),t=require("child_process"),e=new n.Command;e.name("run-until").description("CLI to run a task until another task is run").version("0.0.0");e.argument("<run>","cli task to run").argument("<until>","cli task to run until");e.parse(process.argv);var s=(0,t.spawn)(e.args[0],{shell:!0}),i=()=>{s.kill(),process.exit(0)};s.on("exit",i);s.stdout.on("data",o=>{console.log(o.toString())});(0,t.spawnSync)(e.args[1],{stdio:"inherit",shell:!0});s.off("exit",i);setTimeout(()=>{process.platform=="win32"?(0,t.exec)(`taskkill /PID ${s.pid} /T /F`,o=>{o&&console.log("error: "+o.message),setTimeout(()=>{process.exit(0)},1500)}):(process.kill(-s.pid,"SIGKILL"),setTimeout(()=>{process.exit(0)},1500))},3e3);
